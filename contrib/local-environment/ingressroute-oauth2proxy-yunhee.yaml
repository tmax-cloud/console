apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"traefik.containo.us/v1alpha1","kind":"IngressRoute","metadata":{"annotations":{},"name":"console-ingressroute-yunhee","namespace":"api-gateway-system"},"spec":{"entryPoints":["websecure"],"routes":[{"kind":"Rule","match":"PathPrefix(`/`, `/static/`, `/api/resource/`, `/api/console/`) \u0026\u0026 Host(`yunhee.tmaxcloud.org`)","priority":20,"services":[{"kind":"Service","name":"yunhee-service","namespace":"api-gateway-system","port":9000,"scheme":"https","serversTransport":"insecure@file"}]},{"kind":"Rule","match":"PathPrefix(`/api/hypercloud`, `/api/multi-hypercloud`,`/api/webhook`) \u0026\u0026 Host(`yunhee.tmaxcloud.org`)","middlewares":[{"name":"api-gateway-system-jwt-decode-auth@kubernetescrd"},{"name":"hypercloud-stripprefix@file"}],"priority":100,"services":[{"kind":"Service","name":"hypercloud5-api-server-service","namespace":"hypercloud5-system","port":"https","scheme":"https","serversTransport":"insecure@file"}]},{"kind":"Rule","match":"PathPrefix(`/api/kubernetes`) \u0026\u0026 Host(`yunhee.tmaxcloud.org`)","middlewares":[{"name":"api-gateway-system-jwt-decode-auth@kubernetescrd"},{"name":"kubernetes-stripprefix@file"}],"priority":100,"services":[{"kind":"Service","name":"kubernetes","namespace":"default","port":"https","scheme":"https","serversTransport":"kubernetes@file"}]},{"kind":"Rule","match":"PathPrefix(`/api/prometheus-tenancy/api`) \u0026\u0026 Host(`yunhee.tmaxcloud.org`)","middlewares":[{"name":"api-gateway-system-jwt-decode-auth@kubernetescrd"},{"name":"monitoring-stripprefix-tenancy@file"}],"priority":100,"services":[{"kind":"Service","name":"prometheus-k8s","namespace":"monitoring","port":"web","scheme":"http"}]},{"kind":"Rule","match":"PathPrefix(`/api/prometheus/api`) \u0026\u0026 Host(`yunhee.tmaxcloud.org`)","middlewares":[{"name":"api-gateway-system-jwt-decode-auth@kubernetescrd"},{"name":"monitoring-stripprefix@file"}],"priority":100,"services":[{"kind":"Service","name":"prometheus-k8s","namespace":"monitoring","port":"web","scheme":"http"}]},{"kind":"Rule","match":"PathPrefix(`/api/alertmanager/api`) \u0026\u0026 Host(`yunhee.tmaxcloud.org`)","middlewares":[{"name":"api-gateway-system-jwt-decode-auth@kubernetescrd"},{"name":"monitoring-stripprefix@file"}],"priority":100,"services":[{"kind":"Service","name":"alertmanager-main","namespace":"monitoring","port":"web","scheme":"http"}]}],"tls":{"secretName":"gateway-tls-acme"}}}
  creationTimestamp: "2021-12-15T05:18:55Z"
  generation: 69
  name: console-ingressroute-yunhee
  namespace: api-gateway-system
  resourceVersion: "465797659"
  selfLink: /apis/traefik.containo.us/v1alpha1/namespaces/api-gateway-system/ingressroutes/console-ingressroute-yunhee
  uid: 854867f2-bc2e-4abb-8b9c-739f0fa6fd18
spec:
  entryPoints:
  - websecure
  routes:
  - kind: Rule
    match: PathPrefix(`/`, `/static/`, `/api/resource/`, `/api/console/`) && Host(`yunhee.tmaxcloud.org`)
    middlewares:
    - name: api-gateway-system-oauth2-proxy-redirect@kubernetescrd
    priority: 20
    services:
    - kind: Service
      name: yunhee-service
      namespace: api-gateway-system
      port: 9000
      scheme: https
      serversTransport: insecure@file
  - kind: Rule
    match: PathPrefix(`/oauth2/`) && Host(`yunhee.tmaxcloud.org`)
    middlewares:
    - name: api-gateway-system-oauth2-proxy-headers@kubernetescrd
    services:
    - kind: Service
      name: oauth2-proxy-new
      namespace: api-gateway-system
      port: 80
      scheme: http
  - kind: Rule
    match: PathPrefix(`/api/hypercloud`, `/api/multi-hypercloud`,`/api/webhook`) &&
      Host(`yunhee.tmaxcloud.org`)
    middlewares:
    - name: api-gateway-system-oauth2-proxy-redirect@kubernetescrd
    - name: api-gateway-system-jwt-decode-auth@kubernetescrd
    - name: hypercloud-stripprefix@file
    priority: 100
    services:
    - kind: Service
      name: hypercloud5-api-server-service
      namespace: hypercloud5-system
      port: https
      scheme: https
      serversTransport: insecure@file
  - kind: Rule
    match: PathPrefix(`/api/kubernetes`) && Host(`yunhee.tmaxcloud.org`)
    middlewares:
    - name: api-gateway-system-oauth2-proxy-redirect@kubernetescrd
    - name: api-gateway-system-jwt-decode-auth@kubernetescrd
    - name: kubernetes-stripprefix@file
    priority: 100
    services:
    - kind: Service
      name: kubernetes
      namespace: default
      port: https
      scheme: https
      serversTransport: kubernetes@file
  - kind: Rule
    match: PathPrefix(`/api/prometheus-tenancy/api`) && Host(`yunhee.tmaxcloud.org`)
    middlewares:
    - name: api-gateway-system-oauth2-proxy-redirect@kubernetescrd
    - name: api-gateway-system-jwt-decode-auth@kubernetescrd
    - name: monitoring-stripprefix-tenancy@file
    priority: 100
    services:
    - kind: Service
      name: prometheus-k8s
      namespace: monitoring
      port: web
      scheme: http
  - kind: Rule
    match: PathPrefix(`/api/prometheus/api`) && Host(`yunhee.tmaxcloud.org`)
    middlewares:
    - name: api-gateway-system-oauth2-proxy-redirect@kubernetescrd
    - name: api-gateway-system-jwt-decode-auth@kubernetescrd
    - name: monitoring-stripprefix@file
    priority: 100
    services:
    - kind: Service
      name: prometheus-k8s
      namespace: monitoring
      port: web
      scheme: http
  - kind: Rule
    match: PathPrefix(`/api/alertmanager/api`) && Host(`yunhee.tmaxcloud.org`)
    middlewares:
    - name: api-gateway-system-oauth2-proxy-redirect@kubernetescrd
    - name: api-gateway-system-jwt-decode-auth@kubernetescrd
    - name: monitoring-stripprefix@file
    priority: 100
    services:
    - kind: Service
      name: alertmanager-main
      namespace: monitoring
      port: web
      scheme: http
  tls:
    secretName: gateway-tls-acme
